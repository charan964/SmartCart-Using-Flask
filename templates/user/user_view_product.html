{% extends "layout.html" %}
{% block content %}

<div class="container py-4">

    <div class="row">
        <div class="col-md-5 text-center">
            <img src="/static/uploads/product_images/{{ product.image }}" 
                 class="img-fluid rounded shadow">
        </div>

        <div class="col-md-7">
            
            <h2 class="fw-bold">{{ product.name }}</h2>

            <h4 class="text-primary fw-bold mt-3">â‚¹ {{ product.price }}</h4>

            <p class="mt-3">{{ product.description }}</p>

            <button class="btn btn-warning btn-lg mt-3" 
                    onclick="addToCart({{ product.product_id }})">
                <i class="fa fa-cart-plus"></i> Add to Cart
            </button>

            <a href="/user/cart" class="btn btn-success btn-lg mt-3 ms-2">
                <i class="fa fa-bolt"></i> Buy Now
            </a>
        </div>
    </div>

</div>

<script>
function addToCart(pid) {
    fetch(`/user/add-to-cart/${pid}`)
        .then(res => res.json())
        .then(data => {
            if (data.status === "success") {
                document.getElementById("cart-count").textContent = data.cart_count;
                alert("Item added to cart!");
            } else {
                alert(data.message);
            }
        })
        .catch(err => console.log(err));
}
</script>

{% endblock %}
