{% extends "layout.html" %}
{% block content %}

<h2 class="fw-bold text-center mb-4">Manage Product Stock</h2>

<div class="row stock-wrapper">

    {% if products|length == 0 %}
        <div class="alert alert-warning text-center">
            No products available.
        </div>
    {% endif %}

    {% for p in products %}
    <div class="col-md-4 mb-4">
        <div class="card shadow-sm p-3">

            <!-- Product Image -->
            <img src="/static/uploads/product_images/{{ p.image }}"
                 class="card-img-top mb-3"
                 style="height:180px; object-fit:cover;">

            <!-- Product Name -->
            <h5 class="fw-semibold text-center">{{ p.name }}</h5>
            <p class="text-muted text-center">Category: {{ p.category }}</p>

            <p class="text-center">
                <b>Price:</b> â‚¹{{ p.price }}
            </p>

            <!-- CURRENT STOCK -->
            <p class="text-center mb-1">
                <span class="badge bg-primary fs-6">
                    Current Stock: {{ p.stock if p.stock else 0 }}
                </span>
            </p>

            <!-- UPDATE STOCK FORM -->
            <form action="/admin/update-stock/{{ p.product_id }}" method="POST" class="mt-3">

                <label class="fw-bold">Update Stock</label>
                <input type="number" min="0" name="quantity"
                       class="form-control mb-2"
                       placeholder="Enter new stock value"
                       required>

                <button class="btn btn-success w-100">
                    Update Stock
                </button>
            </form>

        </div>
    </div>
    {% endfor %}

</div>

<style>
.stock-wrapper {
    margin-bottom: 140px; /* Prevent overlap with footer */
}

.card {
    border-radius: 12px;
    transition: 0.3s;
}
.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}
</style>

{% endblock %}
